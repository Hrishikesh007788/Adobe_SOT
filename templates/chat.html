<!DOCTYPE html>
<html>
  <head>
    <link
      href="https://fonts.googleapis.com/css?family=Roboto&display=swap"
      rel="stylesheet"
    />
    <!-- Add Source Sans Pro font -->
    <link
      href="https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap"
      rel="stylesheet"
    />

    <title>dataSense</title>

    <!-- Bootstrap CSS -->
    <link
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Font Awesome CSS -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css"
      rel="stylesheet"
    />
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      rel="stylesheet"
    />
    <!-- Animate.css -->
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: Arial, sans-serif;
        font-family: "Roboto", Arial, sans-serif;
        margin-bottom: 100px; /* Add margin to avoid footer overlapping content */
        font-size: 14px;
        background-color: #e8e8e8;
      }

      .input-with-button {
        display: flex;
        align-items: center;
      }

      .input-field {
        flex: 1;
        margin-right: 10px; /* Add some spacing between the input field and the button */
      }

      .conversation {
        max-height: 300px;
        overflow-y: auto;
        border: 1px solid #ddd;
        padding: 10px;
        border-radius: 10px;
      }
      .user-section {
        text-align: right;
      }

      .input-with-button {
        display: flex;
        align-items: center;
      }

      .user-bubble p,
      .ai-bubble p {
        margin: 0;
        font-size: small;
      }

      .user-bubble {
        background-color: #e8e8e8;
        border-radius: 15px;
        padding: 10px;
        max-width: 85%;
        margin: 10px 0;
        display: inline-block;
      }

      .ai-section {
        text-align: left;
      }

      .ai-bubble {
        background-color: #248dff;
        color: #fff;
        border: 1px solid #ddd;
        border-radius: 15px;
        padding: 10px;
        max-width: 80%;
        margin: 10px 0;
        display: inline-block;
        font-size: small;
      }

      .submit-btn {
        background-color: transparent;
        border: none;
        box-shadow: none;
        cursor: pointer;
        padding: 0; /* Remove padding to remove any spacing around the icon */
        outline: none; /* Remove the focus outline */
        margin-left: -30px;
        margin-bottom: 15px;
      }

      .submit-btn:hover,
      .submit-btn:focus {
        background-color: transparent;
        box-shadow: none;
        outline: none; /* Remove the focus outline */
      }

      .bold-text {
        font-weight: bold;
      }
      .header {
        background-color: #248dff;
        color: #fff;
        padding: 10px;
      }

      .footer {
        background-color: #f9f9f9;
        font-size: smaller;
        padding: 10px;
        position: fixed;
        bottom: 0;
        width: 100%;
        border-top: 1px solid #ddd;
        height: 45px;
      }

      .footer p {
        margin: 0;
        margin-top: -20px;
        /* text-align: left; */
      }

      .header h1 {
        margin: 0;
      }
      .container {
        max-width: 65%;
        margin: auto;
        margin-top: 20px;
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
        padding-top: 20px;
      }

      h4 {
        font-weight: bold;
      }

      .header {
        background-color: #248dff; /* Blue background color */
        color: #fff;
        padding: 20px; /* Increased padding for better spacing */
        text-align: center; /* Center-align header content */
        border-top-left-radius: 10px; /* Add border radius to top-left corner */
        border-top-right-radius: 10px; /* Add border radius to top-right corner */
      }

      .header h1 {
        margin: 0;
        font-size: 32px; /* Larger font size for the main heading */
        font-family: "Source Sans Pro", Arial, sans-serif; /* Use Source Sans Pro font */
        font-weight: bold;
      }

      .brain-icon {
        font-size: 48px; /* Increase font size for a bigger icon */
        margin-bottom: 15px; /* Adjust margin to create spacing between the icon and the heading */
      }
      .uploaded-files-section:hover,
      .upload-section:hover {
        box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1); /* Add a subtle box shadow on hover */
        transform: translateY(-4px); /* Move the card up slightly on hover */
      }
      .subheading {
        color: #e0d6d6; /* Grey color for the subheading text */
        margin: 0; /* Remove margin to make it closer to the main heading */
        font-family: "Source Sans Pro", Arial, sans-serif; /* Use Source Sans Pro font */
      }
      .chat-window {
        border: 1px solid #ddd;
        padding: 20px;
        margin-bottom: 20px;
        background-color: #fff;
        border-radius: 10px;
      }

      .chat-window textarea {
        width: 100%;
        resize: vertical;
        margin-bottom: 10px;
      }
      .form-control {
        width: 100%;
      }
      .input-field {
        margin-top: 20px;
      }
      #question {
        width: 750px;
      }
      .navbar-brand {
        margin-left: 3px;
      }
    </style>
  </head>
  <body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
      <div class="container">
        <i class="fas fa-brain fa-lg" style="color: #ffffff"></i>
        <a class="navbar-brand" href="/" style="color: #248dff; margin: 1px; margin-left: 5px;">d</a>
          <a class="navbar-brand" href="/" style="color: #50e172; margin: 1px;">a</a>
          <a class="navbar-brand" href="/" style="color: #8d1fcc; margin: 1px;">t</a>
          <a class="navbar-brand" href="/" style="color: #e67a27; margin: 1px;">a</a>
          <a class="navbar-brand" href="/" style="color: #0b58bb; margin: 1px;">S</a>
          <a class="navbar-brand" href="/" style="color: #ef5aec; margin: 1px;">e</a>
          <a class="navbar-brand" href="/" style="color: #d64ba8; margin: 1px;">n</a>
          <a class="navbar-brand" href="/" style="color: #dba613; margin: 1px;">s</a>
          <a class="navbar-brand" href="/" style="color: #68e9b3; margin: 1px;">e</a>
        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#navbarNav"
          aria-controls="navbarNav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="/">Admin view</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/user_ask">User view</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="/chatbot">Chatbot</a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <div class="container">
      <!-- <div class="header">
        <i class="fas fa-brain brain-icon"></i>
        <h1 class="display-4">InfoMind</h1>
        <p class="subheading">
          <small
            >A self-serve customised product powered with modern GenAI
            capabilities</small
          >
        </p>
      </div> -->
      <!-- ---CHAT WINDOW--- -->

      <div class="chat-window">
        <div style="display: flex;">
          
          <h4 style="font-size: 1.2rem; white-space: nowrap;">Ask me</h4>
          
          
          <form method="post" action="{{ url_for('delete_chat') }}" style="margin-top: 0; margin-bottom: 10px;">
            <button type="submit" class="btn btn-sm mt-2" title="Clear chat" style="background-color: #248dff; margin-left: 646px; color: #fff; width: 45px; height: 27px; font-size: small;">clear</button>
          </form>
        </div>
       
        {% if not conversation_history_user %}
          <div class="ai-section">
            <div class="ai-bubble">
              <p>
                <span class="bold-text"
                  ><i class="fas fa-brain fa-sm" style="color: #ffffff"></i
                ></span>
                Hi, how may I help you?
              </p>
            </div>
          </div>
        {% endif %}
      
        {% if alert %}
          <div class="alert alert-danger">{{ alert }}</div>
        {% endif %}
        
        <div class="conversation" id="conversation-container">
          
          {% for speaker, message in conversation_history_user %}
            {% if speaker == 'User' %}
              <div class="user-section">
                <div class="user-bubble">
                  <p>
                    <span class="bold-text"><i class="fas fa-user fa-sm"></i></span>
                    {{ message }}
                  </p>
                </div>
              </div>
            {% else %}
              <div class="ai-section">
                <div class="ai-bubble">
                  <p>
                    <span class="bold-text"
                      ><i class="fas fa-brain fa-sm" style="color: #ffffff"></i
                    ></span>
                    {{ message }}
                  </p>
                </div>
              </div>
            {% endif %}
          {% endfor %}
        </div>
      
        <form method="post" action="{{ url_for('user_ask') }}">
          <div class="input-field" style="display: flex">
            <div class="form-group">
              <input
                type="text"
                class="form-control"
                id="question"
                name="question"
                required
                placeholder="Ask a question..."
              />
            </div>
            <button type="submit" class="submit-btn">
              <i class="fas fa-paper-plane fa-lg" style="color: #248dff"></i>
            </button>
          </div>
        </form>
      
       
      </div>
      
    </div>

    <!-- Font Awesome JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/js/all.min.js"></script>
    <!-- Animate.css -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.js"></script>
    <script>

function scrollToBottom() {
    const conversationContainer = document.getElementById("conversation-container");
    conversationContainer.scrollTop = conversationContainer.scrollHeight;
  }
  window.onload = scrollToBottom;

      function submitQuestion() {
        const questionInput = document.getElementById("question-input").value;
        if (questionInput.trim() === "") {
          alert("Please enter a question.");
          return;
        }

        // Here, you can implement logic to handle the submitted question, e.g., send it to a server for processing.
        // For the sake of this example, we'll just display an alert with the question.
        alert("Question submitted: " + questionInput);

        // Clear the input after submission (optional)
        document.getElementById("question-input").value = "";
      }
    </script>
    <footer class="footer mt-5">
      <div class="container text-center">
        <p>&copy; 2023 Adobe Inc. All rights reserved.</p>
      </div>
    </footer>
  </body>
</html>
